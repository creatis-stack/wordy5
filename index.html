<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordy</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React icons (simplified SVG versions)
        const ChevronLeft = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
        );

        const ChevronRight = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
        );

        const Volume2 = ({ size = 20 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
        );

        const TrendingUp = ({ size = 16 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"></polyline>
                <polyline points="17,6 23,6 23,12"></polyline>
            </svg>
        );

        const TrendingDown = ({ size = 16 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23,18 13.5,8.5 8.5,13.5 1,6"></polyline>
                <polyline points="17,18 23,18 23,12"></polyline>
            </svg>
        );

        const Clock = ({ size = 16 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12,6 12,12 16,14"></polyline>
            </svg>
        );

        const VocabularyBuilder = () => {
            const [currentWeek, setCurrentWeek] = useState(0);
            const [currentExample, setCurrentExample] = useState(0);
            const [timeUntilMidnight, setTimeUntilMidnight] = useState('');
            
            // Load difficulty from localStorage with persistent storage
            const [userProfile, setUserProfile] = useState(() => ({
                difficulty: parseInt(localStorage.getItem('vocabDifficulty') || '0')
            }));
            
            // Helper function to get midnight of a date
            const getMidnight = (date) => {
                const midnight = new Date(date);
                midnight.setHours(0, 0, 0, 0);
                return midnight;
            };

            // Helper function to get days between two dates (midnight to midnight)
            const getDaysBetween = (startDate, endDate) => {
                const start = getMidnight(startDate);
                const end = getMidnight(endDate);
                const timeDiff = end.getTime() - start.getTime();
                return Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            };

            // Initialize or get start date (always at midnight)
            const [startDate] = useState(() => {
                const saved = localStorage.getItem('vocabStartDate');
                if (saved) {
                    return getMidnight(new Date(saved));
                } else {
                    const today = getMidnight(new Date());
                    localStorage.setItem('vocabStartDate', today.toISOString());
                    return today;
                }
            });

            // Load skipped words from localStorage
            const [skippedWords, setSkippedWords] = useState(() => {
                const saved = localStorage.getItem('vocabSkippedWords');
                return saved ? JSON.parse(saved) : [];
            });

            // Calculate time until next midnight
            const calculateTimeUntilMidnight = () => {
                const now = new Date();
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(0, 0, 0, 0);
                
                const timeDiff = tomorrow.getTime() - now.getTime();
                const hours = Math.floor(timeDiff / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                
                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            };

            // Calculate current week and day based on midnight boundaries
            useEffect(() => {
                const updateProgress = () => {
                    const now = new Date();
                    const daysPassed = getDaysBetween(startDate, now);
                    
                    const calculatedWeek = Math.floor(daysPassed / 7) + skippedWords.length;
                    const calculatedExample = daysPassed % 7;
                    
                    setCurrentWeek(calculatedWeek);
                    setCurrentExample(calculatedExample);
                    setTimeUntilMidnight(calculateTimeUntilMidnight());
                };

                // Update immediately
                updateProgress();

                // Update every second for the countdown
                const interval = setInterval(updateProgress, 1000);

                return () => clearInterval(interval);
            }, [startDate, skippedWords.length]);

            // Conversational vocabulary database with difficulty ratings
            const vocabularyDatabase = [
                {
                    word: "articulate",
                    pronunciation: "/ɑrˈtɪkyəlɪt/",
                    partOfSpeech: "adjective/verb",
                    meaning: "expressing thoughts clearly and effectively; to speak distinctly",
                    difficulty: -2,
                    examples: [
                        "Maya found herself struggling to articulate the weight of her mother's expectations during dinner conversations that stretched long into the evening, each word carefully chosen yet never quite capturing the complexity of her feelings about the arranged marriage proposal.",
                        "The professor's articulate explanation of quantum mechanics reminded Elena of her father's patient way of describing the monsoon seasons—both men possessed that rare gift of making the incomprehensible feel suddenly, beautifully clear.",
                        "In the cramped apartment above the grocery store, Ravi watched his daughter articulate her dreams of medical school with such precision that he could almost see the stethoscope around her neck, though his own words of encouragement felt clumsy in comparison.",
                        "The way Kamala could articulate the exact shade of homesickness—not the sharp pang of missing a person, but the dull ache of missing a version of yourself—made her friends understand why she spent hours writing letters home.",
                        "During the neighborhood association meeting, Mrs. Chen's articulate defense of the community garden revealed not just her passion for growing vegetables, but her deep understanding of how shared spaces could heal the loneliness of urban life.",
                        "As the wedding approached, Deepa found it increasingly difficult to articulate why she felt like she was watching her life happen to someone else, the Bengali words for doubt feeling too heavy on her tongue.",
                        "The child's articulate questions about why his grandfather only spoke Tamil at home but English everywhere else revealed a wisdom that made the adults in the room fall silent with recognition."
                    ]
                },
                {
                    word: "nuanced",
                    pronunciation: "/ˈnuɑnst/",
                    partOfSpeech: "adjective",
                    meaning: "having subtle differences in expression, meaning, or response",
                    difficulty: -1,
                    examples: [
                        "Priya's relationship with her mother-in-law required a nuanced understanding of when silence meant disapproval and when it meant deep thought, a skill she was still learning after three years of marriage.",
                        "The flavors in her grandmother's curry were impossibly nuanced—cardamom that whispered rather than shouted, turmeric that painted warmth without overwhelming, each spice added with the precision of someone who had perfected the recipe across decades.",
                        "Living between two cultures demanded a nuanced approach to identity that Arjun's American-born friends couldn't quite grasp, the way he could shift between versions of himself as naturally as changing languages.",
                        "The nuanced way her father expressed love—through extra helpings of rice, through staying up late to help with homework, through never saying the words directly—had taken her years to recognize and appreciate.",
                        "In the bookstore where she worked, Meera developed a nuanced understanding of her customers' needs, knowing that the woman who browsed poetry on Tuesdays was working through grief, while the man who lingered in philosophy was questioning his career.",
                        "The conflict between her Indian parents' expectations and her own ambitions required nuanced navigation, each conversation a careful dance between respect and rebellion.",
                        "His writing captured the nuanced experience of growing up bilingual, where some emotions could only be expressed in one language, leaving parts of himself perpetually untranslatable."
                    ]
                },
                {
                    word: "pragmatic",
                    pronunciation: "/prægˈmætɪk/",
                    partOfSpeech: "adjective",
                    meaning: "practical rather than idealistic; focused on what works",
                    difficulty: 0,
                    examples: [
                        "After years of dreaming about returning to India, Sunita took a pragmatic approach to her parents' aging, accepting that love sometimes meant staying in Boston rather than following romantic notions of homeland.",
                        "The pragmatic decision to rent out the basement apartment helped the Patels maintain their mortgage, though it meant sharing their American dream with strangers who left curry smells in the hallway.",
                        "Reshma's pragmatic nature emerged during wedding planning when she suggested buffet-style service over plated dinners, knowing that feeding three hundred guests required logistics, not just tradition.",
                        "His mother's pragmatic advice about choosing a spouse—'Love will grow, but compatibility must exist from the beginning'—seemed cold until he watched friends divorce over irreconcilable differences.",
                        "The pragmatic choice would have been to major in engineering like his brothers, but Vikram's heart pulled him toward literature, creating a tension between family expectations and personal truth.",
                        "In the aftermath of her father's stroke, Kavya discovered her own pragmatic strength, navigating insurance forms and medical decisions with a competence that surprised everyone, including herself.",
                        "The pragmatic arrangement of living with his in-laws during the first years of marriage allowed them to save money for a house, though it required daily negotiations of privacy and independence."
                    ]
                },
                {
                    word: "compelling",
                    pronunciation: "/kəmˈpɛlɪŋ/",
                    partOfSpeech: "adjective",
                    meaning: "evoking interest or attention in a powerful way; convincing",
                    difficulty: 0,
                    examples: [
                        "There was something compelling about the way her aunt told stories of their village in Punjab, each detail painted with such vivid precision that Anita could smell the mustard fields and hear the temple bells across the ocean.",
                        "The compelling argument for keeping the family restaurant open wasn't financial—it was the way customers spoke of the place as their refuge, where the dal tasted like their mother's and the owner remembered their names.",
                        "His compelling presence at family gatherings had nothing to do with being the loudest voice; instead, it was his ability to listen deeply, making even the shyest cousins feel heard and valued.",
                        "The most compelling reason to learn Hindi wasn't to please her grandparents, but to understand the poetry they quoted, to access the emotional language that English couldn't quite capture.",
                        "There was a compelling honesty in the way her teenage daughter questioned their traditions, forcing the entire family to examine which customs served them and which had simply become habit.",
                        "The compelling nature of her homesickness wasn't just missing India, but missing the version of herself who belonged there completely, without explanation or translation.",
                        "His compelling vision for the community center focused not on the building itself, but on creating a space where immigrants could feel less alone in navigating their new country."
                    ]
                },
                {
                    word: "perceptive",
                    pronunciation: "/pərˈsɛptɪv/",
                    partOfSpeech: "adjective",
                    meaning: "having keen insight and understanding; quick to notice things",
                    difficulty: 1,
                    examples: [
                        "Even as a child, Leela was perceptive enough to notice that her mother cooked different foods when they had Indian guests versus American ones, understanding instinctively the code-switching required for survival.",
                        "The perceptive way her grandmother read people's faces made family gatherings feel like watching a master class in human nature, each raised eyebrow and pursed lip translated into precise social intelligence.",
                        "His perceptive observation that their father grew quieter each December—the anniversary of leaving Bangladesh—helped the family understand why the holidays carried an undercurrent of melancholy.",
                        "With perceptive clarity, she realized that her mother's criticism of her career choices wasn't about the job itself, but about the fear that success might take her daughter too far from home.",
                        "The perceptive questions her five-year-old asked about why some people at the temple looked different from others revealed a child's natural ability to notice what adults had learned to ignore.",
                        "Her perceptive understanding of office dynamics helped her navigate being the only Indian woman on the executive team, reading the subtle signals that others missed entirely.",
                        "Through perceptive observation of her neighbors, Mrs. Krishnan learned that loneliness spoke many languages but always wore the same expression of carefully maintained politeness."
                    ]
                },
                {
                    word: "discerning",
                    pronunciation: "/dɪˈsɜrnɪŋ/",
                    partOfSpeech: "adjective",
                    meaning: "showing good judgment and understanding; selective and refined",
                    difficulty: 2,
                    examples: [
                        "Her discerning palate, trained on her mother's complex curries, could detect the difference between garam masala ground fresh and the pre-mixed version from the Indian grocery store, a skill that connected her to generations of women who cooked by intuition.",
                        "The discerning way he chose which traditions to maintain in his American household—keeping the daily prayers but abandoning the restrictions on his daughter's friendships—reflected years of careful thought about identity and adaptation.",
                        "With discerning precision, she curated her wardrobe to navigate both worlds, knowing that the same sari that made her feel elegant at Indian weddings would draw stares at her law firm.",
                        "His discerning approach to dating involved looking beyond surface compatibility to find someone who understood the weight of family expectations without being crushed by them.",
                        "The discerning art collector had an eye for pieces that spoke to the immigrant experience, each painting and sculpture in her gallery telling stories of displacement and belonging.",
                        "Her discerning choice of which battles to fight with her traditional parents—pushing back on career limitations while respecting their religious practices—showed a wisdom beyond her years.",
                        "The discerning reader could see that his novel wasn't just about one family's journey from Calcutta to California, but about the universal struggle to plant roots in foreign soil while keeping the memory of home alive."
                    ]
                }
            ];

            // Get word based on user's difficulty profile
            const getWeeklyWord = (weekIndex) => {
                const adjustedDifficulty = userProfile.difficulty;
                const availableWords = vocabularyDatabase.filter(word => 
                    Math.abs(word.difficulty - adjustedDifficulty) <= 1
                );
                
                if (availableWords.length === 0) {
                    return vocabularyDatabase[weekIndex % vocabularyDatabase.length];
                }
                
                return availableWords[weekIndex % availableWords.length];
            };

            const currentWord = getWeeklyWord(currentWeek);

            // Difficulty adjustment with localStorage persistence
            const adjustDifficulty = (direction) => {
                const newDifficulty = Math.max(-2, Math.min(2, userProfile.difficulty + direction));
                setUserProfile(prev => ({
                    ...prev,
                    difficulty: newDifficulty
                }));
                localStorage.setItem('vocabDifficulty', newDifficulty.toString());
            };

            // Skip current word function
            const skipCurrentWord = () => {
                const newSkippedWords = [...skippedWords, currentWord.word];
                setSkippedWords(newSkippedWords);
                localStorage.setItem('vocabSkippedWords', JSON.stringify(newSkippedWords));
                
                // Move to next word immediately
                setCurrentWeek(currentWeek + 1);
                setCurrentExample(0);
            };

            // Audio pronunciation
            const speakWord = (text) => {
                if ('speechSynthesis' in window) {
                    speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.rate = 0.7;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    const voices = speechSynthesis.getVoices();
                    const englishVoice = voices.find(voice => 
                        voice.lang.startsWith('en') && voice.name.includes('Enhanced')
                    ) || voices.find(voice => voice.lang.startsWith('en'));
                    
                    if (englishVoice) {
                        utterance.voice = englishVoice;
                    }
                    
                    speechSynthesis.speak(utterance);
                } else {
                    alert('Speech synthesis not supported in this browser');
                }
            };

            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 text-white p-6"
            }, 
                React.createElement('div', { className: "max-w-4xl mx-auto" },
                    // Header
                    React.createElement('div', { className: "text-center mb-8" },
                        React.createElement('h1', { className: "text-4xl font-bold mb-2" }, "Wordy"),
                        React.createElement('p', { className: "text-blue-200 mb-2" }, `Week ${currentWeek + 1} • Conversational Level`),
                        React.createElement('div', { className: "flex items-center justify-center gap-2 text-sm text-yellow-300" },
                            React.createElement(Clock, { size: 16 }),
                            React.createElement('span', null, `Next update in: ${timeUntilMidnight}`)
                        )
                    ),

                    // Main Word Card
                    React.createElement('div', { className: "bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-6 border border-white/20" },
                        React.createElement('div', { className: "text-center mb-6" },
                            React.createElement('h2', { className: "text-5xl font-bold text-yellow-300 mb-4" }, currentWord.word),
                            React.createElement('div', { className: "flex items-center justify-center gap-4 mb-4" },
                                React.createElement('span', { className: "text-xl text-blue-200" }, currentWord.pronunciation),
                                React.createElement('button', {
                                    onClick: () => speakWord(currentWord.word),
                                    className: "p-2 bg-blue-600 hover:bg-blue-700 rounded-full transition-colors hover:scale-105 active:scale-95",
                                    title: "Listen to pronunciation"
                                }, React.createElement(Volume2, { size: 20 }))
                            ),
                            React.createElement('p', { className: "text-lg text-purple-200 italic mb-4" }, currentWord.partOfSpeech),
                            React.createElement('p', { className: "text-xl leading-relaxed" }, currentWord.meaning)
                        )
                    ),

                    // Daily Example
                    React.createElement('div', { className: "bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20" },
                        React.createElement('div', { className: "flex items-center justify-between mb-4" },
                            React.createElement('h3', { className: "text-2xl font-semibold" }, "Today's Contextual Usage"),
                            React.createElement('span', { className: "text-sm text-blue-200" }, `Day ${currentExample + 1}`)
                        ),
                        React.createElement('div', { className: "text-lg leading-relaxed text-yellow-200 border-l-4 border-yellow-400 pl-6 italic" },
                            currentWord.examples[currentExample]
                        )
                    ),

                    // Controls
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-6" },
                        // Week Navigation
                        React.createElement('div', { className: "bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20" },
                            React.createElement('h4', { className: "font-semibold mb-3" }, "Navigation"),
                            React.createElement('div', { className: "flex flex-col gap-2" },
                                React.createElement('button', {
                                    onClick: () => setCurrentWeek(Math.max(0, currentWeek - 1)),
                                    disabled: currentWeek === 0,
                                    className: "px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center justify-center gap-2"
                                }, React.createElement(ChevronLeft), "Previous Week"),
                                React.createElement('button', {
                                    onClick: skipCurrentWord,
                                    className: "px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors flex items-center justify-center gap-2"
                                }, React.createElement(ChevronRight), "Skip Word")
                            ),
                            React.createElement('p', { className: "text-xs text-blue-200 mt-2" }, "Updates daily at midnight")
                        ),

                        // Difficulty Control
                        React.createElement('div', { className: "bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20" },
                            React.createElement('h4', { className: "font-semibold mb-3" }, "Future Word Difficulty"),
                            React.createElement('div', { className: "flex justify-between items-center" },
                                React.createElement('button', {
                                    onClick: () => adjustDifficulty(-1),
                                    className: "flex items-center gap-1 px-3 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors"
                                }, React.createElement(TrendingDown, { size: 16 }), "Easier"),
                                React.createElement('span', { className: "font-mono" }, 
                                    `${userProfile.difficulty > 0 ? '+' : ''}${userProfile.difficulty}`
                                ),
                                React.createElement('button', {
                                    onClick: () => adjustDifficulty(1),
                                    className: "flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors"
                                }, React.createElement(TrendingUp, { size: 16 }), "Harder")
                            ),
                            React.createElement('p', { className: "text-xs text-blue-200 mt-2" }, "Saved automatically")
                        ),

                        // Skip Info
                        React.createElement('div', { className: "bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20" },
                            React.createElement('h4', { className: "font-semibold mb-3" }, "Learning Stats"),
                            React.createElement('div', { className: "text-sm space-y-1" },
                                React.createElement('p', null, `Words learned: ${currentWeek + 1}`),
                                React.createElement('p', null, `Words skipped: ${skippedWords.length}`),
                                React.createElement('p', { className: "text-green-400" }, `Total progress: ${currentWeek + 1 + skippedWords.length} words`)
                            )
                        )
                    ),

                    // Weekly Progress
                    React.createElement('div', { className: "bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 mb-6" },
                        React.createElement('div', { className: "flex justify-between items-center mb-4" },
                            React.createElement('h4', { className: "font-semibold" }, "Weekly Progress"),
                            React.createElement('span', { className: "text-sm" }, `Week ${currentWeek + 1}`)
                        ),
                        React.createElement('div', { className: "grid grid-cols-7 gap-1 mb-4" },
                            Array.from({ length: 7 }, (_, i) =>
                                React.createElement('div', {
                                    key: i,
                                    className: `h-8 rounded flex items-center justify-center text-xs ${
                                        i <= currentExample
                                            ? 'bg-green-500' 
                                            : 'bg-white/20'
                                    }`
                                }, i + 1)
                            )
                        ),
                        React.createElement('div', { className: "text-sm text-blue-200 text-center" },
                            `Day ${currentExample + 1} of Week ${currentWeek + 1} • ${currentExample >= 6 ? 'New word at midnight!' : `${6 - currentExample} days until new word`}`
                        )
                    ),

                    // Audio Note
                    React.createElement('div', { className: "text-center text-sm text-blue-200" },
                        React.createElement('p', null, "🔊 Click the volume button to hear pronunciation • Updates automatically at midnight")
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(VocabularyBuilder), document.getElementById('root'));
    </script>
</body>
</html>
